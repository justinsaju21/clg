{% extends 'courseware/base_course.html' %}

{% block course_content %}
<div class="max-w-4xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-800">Course Content</h1>
        <div class="text-sm text-gray-500">
            <span class="mr-4"><i class="fas fa-check-circle text-green-500"></i> Completed</span>
            <span><i class="fas fa-lock text-gray-400"></i> Locked</span>
        </div>
    </div>

    <div class="space-y-4" x-data="{ activeAccordion: null }">
        {% for chapter in chapters %}
        <div class="border border-gray-200 rounded-lg overflow-hidden shadow-sm">
            <!-- Chapter Header -->
            <button @click="activeAccordion = activeAccordion === {{ chapter.id }} ? null : {{ chapter.id }}"
                class="w-full flex justify-between items-center px-6 py-4 bg-gray-50 hover:bg-gray-100 transition-colors">
                <div>
                    <span class="text-sm font-bold text-gray-500 uppercase tracking-wide mr-2">Chapter {{
                        forloop.counter }}</span>
                    <span class="font-bold text-gray-800">{{ chapter.title }}</span>
                </div>
                <i class="fas fa-chevron-down text-gray-400 transition-transform duration-200"
                    :class="{ 'transform rotate-180': activeAccordion === {{ chapter.id }} }"></i>
            </button>

            <!-- Units & Activities -->
            <div x-show="activeAccordion === {{ chapter.id }}" x-transition class="bg-white border-t border-gray-200">
                {% for unit in chapter.units.all %}
                <div class="px-6 py-4 border-b border-gray-100 last:border-b-0">
                    <h4 class="font-medium text-gray-700 mb-3 ml-2 border-l-2 border-tron-teal pl-2">{{ unit.title }}
                    </h4>
                    <ul class="space-y-2 ml-4">
                        {% for activity in unit.activities.all %}
                        <li class="flex items-center justify-between group">
                            <a href="{% url 'courseware:activity_detail' course.course_code activity.id %}"
                                class="flex items-center text-gray-600 hover:text-tron-teal transition-colors">
                                <!-- Icon based on type -->
                                {% if 'VideoResource' in activity.get_real_instance_class.name %}
                                <i class="fas fa-play-circle w-6 text-blue-500"></i>
                                {% elif 'PDFResource' in activity.get_real_instance_class.name %}
                                <i class="fas fa-file-pdf w-6 text-red-500"></i>
                                {% elif 'Quiz' in activity.get_real_instance_class.name %}
                                <i class="fas fa-question-circle w-6 text-yellow-500"></i>
                                {% else %}
                                <i class="fas fa-file-alt w-6 text-gray-500"></i>
                                {% endif %}
                                <span class="ml-2">{{ activity.title }}</span>
                            </a>
                            <!-- Mock Status -->
                            <div class="text-gray-300">
                                {% if forloop.counter == 1 %}
                                <i class="fas fa-check-circle text-green-500"></i>
                                {% else %}
                                <i class="far fa-circle"></i>
                                {% endif %}
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}